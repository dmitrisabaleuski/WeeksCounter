{% extends 'base.html.twig' %}
{% set roles_array = {
    "ROLE_USER" : "ROLE_USER",
    "ROLE_ADMIN" : "ROLE_ADMIN"
} %}
{% block head %}
    {{ parent() }}
    <link href="https://fonts.googleapis.com/css?family=Baloo+Thambi" rel="stylesheet">
{% endblock %}
{% block body %}
    {% block title %}
        <h1 class="account-title title">Manage Account</h1>
        <p class="back_button">Back to <a href="/">Home</a>
        {% if is_granted('ROLE_ADMIN') %}
            or <a href="/admin">admin panle</a></p>
        {% endif %}
    {% endblock %}
    <ul id="admin-list">
        <li id="admin-list-title">
            <ul>
                <li class="user-name">
                    <h3>
                        Accaunt name: <span>{{ app.user.Username }}</span>
                    </h3>
                </li>
                <li class="user_logout account-logout">
                    <a href="/logout">(Sign Out)</a>
                </li>
            </ul>
        </li>
        <li id="user-accounts-manager">
            {% if data is empty %}
                {% set birthDay = '' %}
            {% else %}
                {% set birthDay = data %}
            {% endif %}
            <form name="accountManager" action="/{{ user_role }}/user/edit/{{ user.id }}" method="POST"
                  id="accountManager">
                <p class="form-fields">
                    <label for="name">User name:</label>
                    <input id="name" name="name" type="text" value="{{ user.username }}"/>
                </p>
                <p class="form-fields">
                    <label for="email">User email:</label>
                    <input id="email" name="email" type="text" value="{{ user.email }}"/>
                </p>
                <p class="form-fields">
                    <label for="birthdate">User birthday:</label>
                    <input id="birthdate" name="birthdate" type="date" value="{{ birthDay }}"/>
                </p>
                <p class="form-fields">
                    <label for="userRole">User role:</label>
                    <select name="userRole" id="userRole">
                        {% for role in roles_array %}
                            {% set selected = '' %}
                            {% if role == user.roles.0 %}
                                {% set selected = 'selected' %}
                            {% endif %}
                            <option value="{{ role }}" {{ selected }}>{{ role }}</option>
                        {% endfor %}
                    </select>
                </p>
                <p class="setting_buttons">
                    <input class="update_botton" type="submit" value="Update"/>
                    {% if is_granted('ROLE_ADMIN') %}
                        <a class="user-delete-button" href="delete/{{ user.id }}">Delete User {{ user.username }}</a>
                    {% endif %}
                </p>
            </form>
        </li>
    </ul>
    {% block footer %}
    {% endblock %}
{% endblock %}